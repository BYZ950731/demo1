Index: app/src/main/java/com/example/lbstest/MainActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.lbstest;\n\nimport android.Manifest;\nimport android.content.pm.PackageManager;\nimport android.support.annotation.NonNull;\nimport android.support.v4.app.ActivityCompat;\nimport android.support.v4.content.ContextCompat;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport com.baidu.location.BDAbstractLocationListener;\nimport com.baidu.location.BDLocation;\nimport com.baidu.location.BDLocationListener;\nimport com.baidu.location.LocationClient;\nimport com.baidu.location.LocationClientOption;\nimport com.baidu.mapapi.SDKInitializer;\nimport com.baidu.mapapi.map.BaiduMap;\nimport com.baidu.mapapi.map.MapStatusUpdate;\nimport com.baidu.mapapi.map.MapStatusUpdateFactory;\nimport com.baidu.mapapi.map.MapView;\nimport com.baidu.mapapi.map.MyLocationData;\nimport com.baidu.mapapi.model.LatLng;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class MainActivity extends AppCompatActivity {\n    public LocationClient mLocationClient;\n    private TextView positionText;\n    private MapView mapView;\n    BaiduMap baiduMap;\n    private boolean isFirstLocate=true;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        mLocationClient=new LocationClient(getApplicationContext());\n        mLocationClient.registerLocationListener(new MyLocationListener());\n        SDKInitializer.initialize(getApplicationContext());\n        setContentView(R.layout.activity_main);\n        mapView=(MapView)findViewById(R.id.bmapView);\n        baiduMap=mapView.getMap();\n        baiduMap.setMyLocationEnabled(true);\n        positionText=(TextView)findViewById(R.id.position_text_view);\n        List<String> permissionList=new ArrayList<>();\n        if (ContextCompat.checkSelfPermission(MainActivity.this,Manifest.permission.ACCESS_FINE_LOCATION)!=PackageManager.PERMISSION_GRANTED){\n            permissionList.add(Manifest.permission.ACCESS_FINE_LOCATION);\n        }\n        if (ContextCompat.checkSelfPermission(MainActivity.this,Manifest.permission.READ_PHONE_STATE)!=PackageManager.PERMISSION_GRANTED){\n            permissionList.add(Manifest.permission.READ_PHONE_STATE);\n        }\n        if (ContextCompat.checkSelfPermission(MainActivity.this,Manifest.permission.WRITE_EXTERNAL_STORAGE)!=PackageManager.PERMISSION_GRANTED){\n            permissionList.add(Manifest.permission.WRITE_EXTERNAL_STORAGE);\n        }\n        if (!permissionList.isEmpty()){\n            String [] permissions=permissionList.toArray(new String[permissionList.size()]);\n            ActivityCompat.requestPermissions(MainActivity.this,permissions,1);\n        }else {\n            requestLocation();\n        }\n\n    }\n    private void navigateTo(BDLocation location){\n        if (isFirstLocate){\n            LatLng ll=new LatLng(location.getLatitude(),location.getLongitude());\n            MapStatusUpdate update=MapStatusUpdateFactory.newLatLng(ll);\n            baiduMap.animateMapStatus(update);\n            update=MapStatusUpdateFactory.zoomTo(16f);\n            baiduMap.animateMapStatus(update);\n            isFirstLocate=false;\n        }\n        MyLocationData.Builder builder=new MyLocationData.Builder();\n        builder.latitude(location.getLatitude());\n        builder.longitude(location.getLongitude());\n        MyLocationData locationData=builder.build();\n        baiduMap.setMyLocationData(locationData);\n    }\n    private void requestLocation(){\n        initLocation();\n        mLocationClient.start();\n    }\n    private void initLocation(){\n        LocationClientOption option=new LocationClientOption();\n       // option.setLocationMode(LocationClientOption.LocationMode.Device_Sensors);\n        option.setScanSpan(5000);\n        option.setIsNeedAddress(true);\n        mLocationClient.setLocOption(option);\n    }\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n        mapView.onResume();\n    }\n\n    @Override\n    protected void onPause() {\n        super.onPause();\n        mapView.onPause();\n    }\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        mLocationClient.stop();\n        mapView.onDestroy();\n        baiduMap.setMyLocationEnabled(false);\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        switch (requestCode){\n            case 1:\n                if (grantResults.length>0){\n                    for (int result:grantResults){\n                        if (result!=PackageManager.PERMISSION_GRANTED){\n                            Toast.makeText(this,\"必须同意才能使用\",Toast.LENGTH_SHORT).show();\n                            finish();\n                            return;\n                        }\n                    }\n                    requestLocation();\n                }else {\n                    Toast.makeText(this,\"发生未知错误\",Toast.LENGTH_SHORT).show();\n                    finish();\n                }\n                break;\n                default:\n                    break;\n        }\n    }\n\n    public class MyLocationListener extends BDAbstractLocationListener {\n        @Override\n        public void onReceiveLocation(BDLocation bdLocation) {\n            /*\n            StringBuilder currentPosition=new StringBuilder();\n            currentPosition.append(\"纬度: \").append(bdLocation.getLatitude()).append(\"\\n\");\n            currentPosition.append(\"经线: \").append(bdLocation.getLongitude()).append(\"\\n\");\n            currentPosition.append(\"国家: \").append(bdLocation.getCountry()).append(\"\\n\");\n            currentPosition.append(\"省: \").append(bdLocation.getProvince()).append(\"\\n\");\n            currentPosition.append(\"市: \").append(bdLocation.getCity()).append(\"\\n\");\n            currentPosition.append(\"区: \").append(bdLocation.getDistrict()).append(\"\\n\");\n            currentPosition.append(\"街道: \").append(bdLocation.getStreet()).append(\"\\n\");\n            currentPosition.append(\"定位方式: \");\n            if (bdLocation.getLocType()==BDLocation.TypeGpsLocation){\n                currentPosition.append(\"GPS\");\n            }else if(bdLocation.getLocType()==BDLocation.TypeNetWorkLocation){\n                currentPosition.append(\"网络方式\");\n            }\n            positionText.setText(currentPosition);\n          */\n           if (bdLocation.getLocType()==BDLocation.TypeGpsLocation||bdLocation.getLocType()==BDLocation.TypeNetWorkLocation){\n               navigateTo(bdLocation);\n           }\n        }\n    }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/lbstest/MainActivity.java	(date 1554187340000)
+++ app/src/main/java/com/example/lbstest/MainActivity.java	(date 1554189208387)
@@ -7,6 +7,7 @@
 import android.support.v4.content.ContextCompat;
 import android.support.v7.app.AppCompatActivity;
 import android.os.Bundle;
+import android.util.Log;
 import android.widget.TextView;
 import android.widget.Toast;
 
@@ -59,7 +60,7 @@
         }else {
             requestLocation();
         }
-
+        Log.d("MainActivity","version");
     }
     private void navigateTo(BDLocation location){
         if (isFirstLocate){
@@ -106,6 +107,7 @@
         mLocationClient.stop();
         mapView.onDestroy();
         baiduMap.setMyLocationEnabled(false);
+
     }
 
     @Override
